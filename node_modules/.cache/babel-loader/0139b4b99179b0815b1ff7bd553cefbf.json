{"ast":null,"code":"import _objectSpread from\"/Users/sb/Projects/moken-website/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/sb/Projects/moken-website/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sb/Projects/moken-website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";// import { store } from \"../index\";\n// const isUnauthorized = response => {\n//   const { status, statusCode } = response;\n//   const refreshToken = localStorage.getItem(\"refreshToken\");\n//   if (status === 401 || statusCode === 401) {\n//     store.dispatch(actions.refreshToken.request({ refreshToken }));\n//   }\n// };\nexport var parseResult=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var result,error,_error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return response.json();case 3:result=_context.sent;_context.next=11;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);// isUnauthorized(response);\nerror={};error.message=\"error.API.parseResult\";throw error;case 11:if(response.ok){_context.next=16;break;}_error={};_error.status=response.status;_error.message=result.message;throw _error;case 16:return _context.abrupt(\"return\",result);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function parseResult(_x){return _ref.apply(this,arguments);};}();export var sfetch=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2){var method,url,body,_ref2$headersData,headersData,headers,request;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:method=_ref2.method,url=_ref2.url,body=_ref2.body,_ref2$headersData=_ref2.headersData,headersData=_ref2$headersData===void 0?{}:_ref2$headersData;headers={// Accept: \"application/json\",\n// \"Content-Type\": \"application/json; charset=utf-8\"\n};// const accessToken = localStorage.getItem(\"accessToken\");\nheaders.Authorization=\"Bearer RTIXC3DFI5CCTUTKYJKC\";request={method:method,headers:_objectSpread({},headers,{},headersData)};if(body){request.body=JSON.stringify(body);}return _context2.abrupt(\"return\",fetch(url,request));case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function sfetch(_x2){return _ref3.apply(this,arguments);};}();export var sget=function sget(_ref4){var url=_ref4.url;return sfetch({method:\"GET\",url:url,body:null});};export var spost=function spost(_ref5){var url=_ref5.url,body=_ref5.body,headersData=_ref5.headersData;return sfetch({method:\"POST\",url:url,body:body,headersData:headersData});};export var sput=function sput(_ref6){var url=_ref6.url,body=_ref6.body;return sfetch({method:\"PUT\",url:url,body:body});};export var sdelete=function sdelete(_ref7){var url=_ref7.url,body=_ref7.body;return sfetch({method:\"DELETE\",url:url,body:body});};export var spatch=function spatch(_ref8){var url=_ref8.url,body=_ref8.body;return sfetch({method:\"PATCH\",url:url,body:body});};","map":{"version":3,"sources":["/Users/sb/Projects/moken-website/src/api/helpers.js"],"names":["parseResult","response","json","result","error","message","ok","status","sfetch","method","url","body","headersData","headers","Authorization","request","JSON","stringify","fetch","sget","spost","sput","sdelete","spatch"],"mappings":"qVAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAO,IAAMA,CAAAA,WAAW,0FAAG,iBAAOC,QAAP,gLAGRA,CAAAA,QAAQ,CAACC,IAAT,EAHQ,QAGvBC,MAHuB,8FAMvB;AACMC,KAPiB,CAOT,EAPS,CAQvBA,KAAK,CAACC,OAAN,CAAgB,uBAAhB,CARuB,KASjBD,CAAAA,KATiB,YAYpBH,QAAQ,CAACK,EAZW,0BAajBF,MAbiB,CAaT,EAbS,CAcvBA,MAAK,CAACG,MAAN,CAAeN,QAAQ,CAACM,MAAxB,CACAH,MAAK,CAACC,OAAN,CAAgBF,MAAM,CAACE,OAAvB,CAfuB,KAgBjBD,CAAAA,MAhBiB,yCAmBlBD,MAnBkB,sEAAH,kBAAXH,CAAAA,WAAW,4CAAjB,CAsBP,MAAO,IAAMQ,CAAAA,MAAM,2FAAG,+MACpBC,MADoB,OACpBA,MADoB,CAEpBC,GAFoB,OAEpBA,GAFoB,CAGpBC,IAHoB,OAGpBA,IAHoB,yBAIlBC,WAJkB,CAIlBA,WAJkB,4BAIJ,EAJI,mBAMdC,OANc,CAMuB,CACzC;AACA;AAFyC,CANvB,CAUpB;AACCA,OAAO,CAACC,aAAR,+BAEKC,OAbc,CAaoB,CACtCN,MAAM,CAANA,MADsC,CAEtCI,OAAO,kBACFA,OADE,IAEFD,WAFE,CAF+B,CAbpB,CAoBpB,GAAID,IAAJ,CAAU,CACRI,OAAO,CAACJ,IAAR,CAAeK,IAAI,CAACC,SAAL,CAAeN,IAAf,CAAf,CACD,CAtBmB,iCAwBbO,KAAK,CAACR,GAAD,CAAMK,OAAN,CAxBQ,0DAAH,kBAANP,CAAAA,MAAM,8CAAZ,CA2BP,MAAO,IAAMW,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,WAAGT,CAAAA,GAAH,OAAGA,GAAH,OAClBF,CAAAA,MAAM,CAAC,CAAEC,MAAM,CAAE,KAAV,CAAiBC,GAAG,CAAHA,GAAjB,CAAsBC,IAAI,CAAE,IAA5B,CAAD,CADY,EAAb,CAEP,MAAO,IAAMS,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,WAAGV,CAAAA,GAAH,OAAGA,GAAH,CAAQC,IAAR,OAAQA,IAAR,CAAcC,WAAd,OAAcA,WAAd,OACnBJ,CAAAA,MAAM,CAAC,CAAEC,MAAM,CAAE,MAAV,CAAkBC,GAAG,CAAHA,GAAlB,CAAuBC,IAAI,CAAJA,IAAvB,CAA6BC,WAAW,CAAXA,WAA7B,CAAD,CADa,EAAd,CAEP,MAAO,IAAMS,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,WAAGX,CAAAA,GAAH,OAAGA,GAAH,CAAQC,IAAR,OAAQA,IAAR,OAClBH,CAAAA,MAAM,CAAC,CAAEC,MAAM,CAAE,KAAV,CAAiBC,GAAG,CAAHA,GAAjB,CAAsBC,IAAI,CAAJA,IAAtB,CAAD,CADY,EAAb,CAEP,MAAO,IAAMW,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,WAAGZ,CAAAA,GAAH,OAAGA,GAAH,CAAQC,IAAR,OAAQA,IAAR,OACrBH,CAAAA,MAAM,CAAC,CAAEC,MAAM,CAAE,QAAV,CAAoBC,GAAG,CAAHA,GAApB,CAAyBC,IAAI,CAAJA,IAAzB,CAAD,CADe,EAAhB,CAEP,MAAO,IAAMY,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,WAAGb,CAAAA,GAAH,OAAGA,GAAH,CAAQC,IAAR,OAAQA,IAAR,OACpBH,CAAAA,MAAM,CAAC,CAAEC,MAAM,CAAE,OAAV,CAAmBC,GAAG,CAAHA,GAAnB,CAAwBC,IAAI,CAAJA,IAAxB,CAAD,CADc,EAAf","sourcesContent":["// import { store } from \"../index\";\n\n// const isUnauthorized = response => {\n//   const { status, statusCode } = response;\n//   const refreshToken = localStorage.getItem(\"refreshToken\");\n//   if (status === 401 || statusCode === 401) {\n//     store.dispatch(actions.refreshToken.request({ refreshToken }));\n//   }\n// };\n\nexport const parseResult = async (response: Object) => {\n  let result;\n  try {\n    result = await response.json();\n    // isUnauthorized(result);\n  } catch (e) {\n    // isUnauthorized(response);\n    const error = {};\n    error.message = \"error.API.parseResult\";\n    throw error;\n  }\n\n  if (!response.ok) {\n    const error = {};\n    error.status = response.status;\n    error.message = result.message;\n    throw error;\n  }\n\n  return result;\n};\n\nexport const sfetch = async ({\n  method,\n  url,\n  body,\n    headersData = {}\n}) => {\n  const headers: { [key: string]: string } = {\n    // Accept: \"application/json\",\n    // \"Content-Type\": \"application/json; charset=utf-8\"\n  };\n  // const accessToken = localStorage.getItem(\"accessToken\");\n   headers.Authorization = `Bearer RTIXC3DFI5CCTUTKYJKC`;\n\n  const request: { [key: string]: any } = {\n    method,\n    headers: {\n      ...headers,\n      ...headersData\n    }\n  };\n  if (body) {\n    request.body = JSON.stringify(body);\n  }\n\n  return fetch(url, request);\n};\n\nexport const sget = ({ url }: { url: string }) =>\n  sfetch({ method: \"GET\", url, body: null });\nexport const spost = ({ url, body, headersData }: { url: string, body: Object, headersData: Object }) =>\n  sfetch({ method: \"POST\", url, body, headersData });\nexport const sput = ({ url, body }: { url: string, body: Object }) =>\n  sfetch({ method: \"PUT\", url, body });\nexport const sdelete = ({ url, body }: { url: string, body: Object }) =>\n  sfetch({ method: \"DELETE\", url, body });\nexport const spatch = ({ url, body }: { url: string, body: Object }) =>\n  sfetch({ method: \"PATCH\", url, body });\n"]},"metadata":{},"sourceType":"module"}