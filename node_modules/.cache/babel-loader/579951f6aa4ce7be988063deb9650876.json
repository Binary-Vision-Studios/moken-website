{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sb/Projects/moken-website/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/sb/Projects/moken-website/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/sb/Projects/moken-website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sb/Projects/moken-website/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Input from\"../Input\";import Text from\"../Text\";import\"./index.scss\";import Button from\"../Button\";import useWindowDimensions from\"../../hooks/useWindowDimensions\";import useValues from\"../../hooks/useValues\";import{sget,spost}from\"../../api/helpers\";import emailjs from\"emailjs-com\";import Loader from\"../Loader\";var EmailForm=function EmailForm(_ref){var _ref$title=_ref.title,title=_ref$title===void 0?\"Stay in the loop & never miss a thing.\":_ref$title,_ref$className=_ref.className,className=_ref$className===void 0?\"\":_ref$className,withForm=_ref.withForm,_ref$titleClassName=_ref.titleClassName,titleClassName=_ref$titleClassName===void 0?'':_ref$titleClassName;var _useWindowDimensions=useWindowDimensions(),isMobile=_useWindowDimensions.isMobile;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFetching=_useState2[0],setIsFetching=_useState2[1];var _useValues=useValues({email:''}),_useValues2=_slicedToArray(_useValues,5),values=_useValues2[0],getProps=_useValues2[1],isFormValid=_useValues2[2],errors=_useValues2[3],clearValues=_useValues2[4];var handleSubscribe=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(isFormValid){setIsFetching(true);emailjs.send('service_xo07b28','template_xlljnfu',_objectSpread({},values,{name:'No name'}),'user_ILhvoG5ED9QfcW7AV2q89').then(function(response){console.log('SUCCESS!',response.status,response.text);localStorage.setItem('subscription',true);},function(error){console.log('FAILED...',error);}).finally(function(){setIsFetching(false);});}case 1:case\"end\":return _context.stop();}}},_callee);}));return function handleSubscribe(){return _ref2.apply(this,arguments);};}();var handleOnChange=function handleOnChange(name,value){var _getProps=getProps(name),onChangeText=_getProps.onChangeText;onChangeText(value);};return/*#__PURE__*/React.createElement(React.Fragment,null,withForm?/*#__PURE__*/React.createElement(\"div\",{className:\"email-form-container \".concat(className)},/*#__PURE__*/React.createElement(Loader,{isShow:isFetching}),/*#__PURE__*/React.createElement(\"div\",{\"data-aos\":\"fade-in\",className:\"email-form-divider\"}),/*#__PURE__*/React.createElement(Text,{containerStyles:{margin:isMobile?\"4vw 0\":\"70px 0 78px 0\"},size:isMobile?\"5vw\":30,animationType:\"fade-in\",type:\"kLight\"// type={\"thin\"}\n,className:titleClassName,textStyles:{letterSpacing:0.3}},title),!JSON.parse(localStorage.getItem('subscription'))?/*#__PURE__*/React.createElement(\"div\",{className:\"email-form-form\"},/*#__PURE__*/React.createElement(Input,Object.assign({value:values.email,placeholder:\"Your Email Address\",onChange:function onChange(value){return handleOnChange('email',value);}},getProps('email'),{containerStyles:{width:isMobile?'100%':300}})),/*#__PURE__*/React.createElement(Button,{disabled:!isFormValid,title:\"SUBSCRIBE\",onClick:handleSubscribe,type:'white-bordered'})):/*#__PURE__*/React.createElement(Text,{type:\"kLight\",size:20},\"Thank you for subscribing\")):null);};export default EmailForm;","map":{"version":3,"sources":["/Users/sb/Projects/moken-website/src/components/EmailForm/index.js"],"names":["React","useState","Input","Text","Button","useWindowDimensions","useValues","sget","spost","emailjs","Loader","EmailForm","title","className","withForm","titleClassName","isMobile","isFetching","setIsFetching","email","values","getProps","isFormValid","errors","clearValues","handleSubscribe","send","name","then","response","console","log","status","text","localStorage","setItem","error","finally","handleOnChange","value","onChangeText","margin","letterSpacing","JSON","parse","getItem","width"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport Input from \"../Input\";\nimport Text from \"../Text\";\nimport \"./index.scss\";\nimport Button from \"../Button\";\nimport useWindowDimensions from \"../../hooks/useWindowDimensions\";\nimport useValues from \"../../hooks/useValues\";\nimport {sget, spost} from \"../../api/helpers\";\nimport emailjs from \"emailjs-com\";\nimport Loader from \"../Loader\";\n\nconst EmailForm = ({\n  title = \"Stay in the loop & never miss a thing.\",\n  className = \"\",\n  withForm,\n                     titleClassName=''\n}) => {\n  const { isMobile } = useWindowDimensions();\n\n  const [isFetching, setIsFetching] = useState(false);\n\n  const [values, getProps, isFormValid, errors, clearValues] = useValues({\n    email: '',\n  });\n\n  const handleSubscribe = async () => {\n    if(isFormValid) {\n      setIsFetching(true);\n      emailjs.send(\n          'service_xo07b28',\n          'template_xlljnfu',\n          {...values, name: 'No name'},\n          'user_ILhvoG5ED9QfcW7AV2q89')\n          .then(function(response) {\n            console.log('SUCCESS!', response.status, response.text);\n            localStorage.setItem('subscription', true);\n          }, function(error) {\n            console.log('FAILED...', error);\n          }).finally(() => {\n            setIsFetching(false);\n          })\n    }\n  }\n\n\n  const handleOnChange = (name, value) => {\n    const {onChangeText}= getProps(name);\n    onChangeText(value)\n  }\n\n  return (\n    <>\n      {withForm ? (\n        <div className={`email-form-container ${className}`}>\n          <Loader isShow={isFetching} />\n          <div data-aos=\"fade-in\" className={\"email-form-divider\"} />\n          <Text\n            containerStyles={{ margin: isMobile ? \"4vw 0\" : \"70px 0 78px 0\" }}\n            size={isMobile ? \"5vw\" : 30}\n            animationType={\"fade-in\"}\n            type={\"kLight\"}\n            // type={\"thin\"}\n              className={titleClassName}\n            textStyles={{ letterSpacing: 0.3 }}\n          >\n            {title}\n          </Text>\n          {!JSON.parse(localStorage.getItem('subscription')) ? <div className={\"email-form-form\"}>\n            <Input\n                value={values.email}\n                placeholder={\"Your Email Address\"}\n                onChange={(value) => handleOnChange('email', value)}\n                {...getProps('email')}\n                containerStyles={{width: isMobile ? '100%' : 300}}\n            />\n            <Button\n                disabled={!isFormValid}\n                title={\"SUBSCRIBE\"}\n                onClick={handleSubscribe}\n                type={'white-bordered'}\n            />\n          </div> : <Text  type={\"kLight\"} size={20}>Thank you for subscribing</Text>}\n        </div>\n      ) : null}\n    </>\n  );\n};\n\nexport default EmailForm;\n"]},"metadata":{},"sourceType":"module"}